(()=>{var o={n:e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return o.d(r,{a:r}),r},d:(e,r)=>{for(var t in r)o.o(r,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},o:(o,e)=>Object.prototype.hasOwnProperty.call(o,e),r:o=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}},e={};(()=>{"use strict";o.r(e);const r=flarum.core.compat["common/extend"],t=flarum.core.compat["forum/app"];var n=o.n(t);const s=flarum.core.compat["common/components/Alert"];var a=o.n(s);const c=flarum.core.compat["forum/utils/DiscussionControls"];var l=o.n(c);const u=flarum.core.compat["forum/components/EditPostComposer"];var i=o.n(u);const p=flarum.core.compat["forum/components/LogInModal"];var d=o.n(p);const f=flarum.core.compat["common/Model"];var y=o.n(f);const v=flarum.core.compat["forum/components/ReplyComposer"];var b=o.n(v);const g=flarum.core.compat["common/models/User"];var _=o.n(g);n().initializers.add("the-turk-nodp",(function(){_().prototype.canDoublePost=y().attribute("canDoublePost"),(0,r.extend)(i().prototype,"headerItems",(function(o){o.add("nodp",m("div",{className:"Alert"},m("div",{className:"Alert-body"},m("h4",null,n().translator.trans("the-turk-nodp.forum.composer_edit.double_posting_warning_title")),m("p",null,n().translator.trans("the-turk-nodp.forum.composer_edit.double_posting_warning_description")))))})),(0,r.override)(l(),"replyAction",(function(o,e){var r=this,t=n().session.user;return new Promise((function(s,m){if(t){if(function(o,e){if(!o||!e||e.canDoublePost())return!1;var r=o.lastPostedUser(),t=o.lastPostedAt(),s=n().forum.attribute("nodp.time_limit"),a=dayjs(t.getTime()).add(s,"minute").isBefore(dayjs());return 0==s||!a&&r==e}(r,t)){var c=r.lastPost();return"comment"===c.contentType()&&c.canEdit()?(n().composer.load(i(),{post:c}),n().composer.show(),$("body").find(".item-nodp").css("display","block"),s(n().composer)):(n().alerts.show(a(),{type:"error"},n().translator.trans("the-turk-nodp.forum.discussion.cannot_reply_alert_message")),m())}return r.canReply()?(n().composer.composingReplyTo(r)&&!e||n().composer.load(b(),{user:t,discussion:r}),n().composer.show(),o&&n().viewingDiscussion(r)&&!n().composer.isFullScreen()&&n().current.get("stream").goToNumber("reply"),s(n().composer)):m()}return n().modal.show(d()),m()}))}))}),-10)})(),module.exports=e})();
//# sourceMappingURL=forum.js.map